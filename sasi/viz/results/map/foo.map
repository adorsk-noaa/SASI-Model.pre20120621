MAP
  EXTENT -79.98828125 31.0109375 -65.01171875 44.9890625
  IMAGECOLOR 3 3 3
  IMAGETYPE image/gif
  SIZE 640 640
  STATUS ON
  UNITS DD
  CONFIG MS_NONSQUARE "YES"
  NAME "SASI Results"

  OUTPUTFORMAT
    NAME "gif"
    MIMETYPE "image/gif"
    DRIVER "GD/GIF"
    EXTENSION "gif"
    IMAGEMODE "RGBA"
    TRANSPARENT TRUE
  END

  PROJECTION
    "init=epsg:4326"
  END
  LEGEND
    IMAGECOLOR 255 255 255
    KEYSIZE 20 10
    KEYSPACING 5 5
    LABEL
      SIZE MEDIUM
      TYPE BITMAP
      BUFFER 0
      COLOR 0 0 0
      FORCE FALSE
      MINDISTANCE -1
      MINFEATURESIZE -1
      OFFSET 0 0
      PARTIALS TRUE
    END
    POSITION LL
    STATUS OFF
  END

  QUERYMAP
    COLOR 255 255 0
    SIZE -1 -1
    STATUS OFF
    STYLE HILITE
  END

  SCALEBAR
    ALIGN CENTER
    COLOR 0 0 0
    IMAGECOLOR 255 255 255
    INTERVALS 4
    LABEL
      SIZE MEDIUM
      TYPE BITMAP
      BUFFER 0
      COLOR 0 0 0
      FORCE FALSE
      MINDISTANCE -1
      MINFEATURESIZE -1
      OFFSET 0 0
      PARTIALS TRUE
    END
    POSITION LL
    SIZE 200 3
    STATUS OFF
    STYLE 0
    UNITS MILES
  END

  WEB
    IMAGEPATH ""
    IMAGEURL ""
    QUERYFORMAT text/html
    LEGENDFORMAT text/html
    BROWSEFORMAT text/html
  END

  LAYER
    CONNECTION "host=localhost password=sasi dbname=dev_sasi user=sasi"
    CONNECTIONTYPE POSTGIS
    DATA "geom from (SELECT ST_SetSRID(cell_1.geom, 4326) AS geom, cell_1.id AS geom_id, sum(result_1.value) AS value_field 
FROM result AS result_1 JOIN (SELECT DISTINCT result_2.id AS id 
FROM result AS result_2 
WHERE result_2.field = 'A') AS anon_1 ON result_1.id = anon_1.id JOIN cell AS cell_1 ON cell_1.id = result_1.cell_id GROUP BY cell_1.id) AS subquery USING UNIQUE geom_id USING srid=4326"
    NAME "data"
    PROJECTION
      "init=epsg:4326"
    END
    STATUS DEFAULT
    TYPE POLYGON
    UNITS METERS
    CLASS
      NAME "None to 0"
      EXPRESSION ([value_field] < 0)
      STYLE
        ANGLE 360
        COLOR 0 0 0
        SYMBOL 0
        WIDTH 1
      END
    END
    CLASS
      NAME "30040377.6 to 60080755.2"
      EXPRESSION ([value_field] >= 30040377.6 AND [value_field] < 60080755.2)
      STYLE
        ANGLE 360
        COLOR 25 25 25
        SYMBOL 0
        WIDTH 1
      END
    END
    CLASS
      NAME "60080755.2 to 90121132.8"
      EXPRESSION ([value_field] >= 60080755.2 AND [value_field] < 90121132.8)
      STYLE
        ANGLE 360
        COLOR 51 51 51
        SYMBOL 0
        WIDTH 1
      END
    END
    CLASS
      NAME "90121132.8 to 120161510.4"
      EXPRESSION ([value_field] >= 90121132.8 AND [value_field] < 120161510.4)
      STYLE
        ANGLE 360
        COLOR 76 76 76
        SYMBOL 0
        WIDTH 1
      END
    END
    CLASS
      NAME "120161510.4 to 150201888.0"
      EXPRESSION ([value_field] >= 120161510.4 AND [value_field] < 150201888.0)
      STYLE
        ANGLE 360
        COLOR 102 102 102
        SYMBOL 0
        WIDTH 1
      END
    END
    CLASS
      NAME "150201888.0 to 180242265.6"
      EXPRESSION ([value_field] >= 150201888.0 AND [value_field] < 180242265.6)
      STYLE
        ANGLE 360
        COLOR 127 127 127
        SYMBOL 0
        WIDTH 1
      END
    END
    CLASS
      NAME "180242265.6 to 210282643.2"
      EXPRESSION ([value_field] >= 180242265.6 AND [value_field] < 210282643.2)
      STYLE
        ANGLE 360
        COLOR 153 153 153
        SYMBOL 0
        WIDTH 1
      END
    END
    CLASS
      NAME "210282643.2 to 240323020.8"
      EXPRESSION ([value_field] >= 210282643.2 AND [value_field] < 240323020.8)
      STYLE
        ANGLE 360
        COLOR 178 178 178
        SYMBOL 0
        WIDTH 1
      END
    END
    CLASS
      NAME "240323020.8 to 270363398.4"
      EXPRESSION ([value_field] >= 240323020.8 AND [value_field] < 270363398.4)
      STYLE
        ANGLE 360
        COLOR 204 204 204
        SYMBOL 0
        WIDTH 1
      END
    END
    CLASS
      NAME "270363398.4 to 300403776.0"
      EXPRESSION ([value_field] >= 270363398.4 AND [value_field] < 300403776.0)
      STYLE
        ANGLE 360
        COLOR 229 229 229
        SYMBOL 0
        WIDTH 1
      END
    END
    CLASS
      NAME "300403776 to None"
      EXPRESSION ([value_field] >= 300403776)
      STYLE
        ANGLE 360
        COLOR 229 229 229
        SYMBOL 0
        WIDTH 1
      END
    END
  END

END
